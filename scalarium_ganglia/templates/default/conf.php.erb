<?php

#conf.php file will override settings from conf_default.php

$template_name = "scalarium";

$metriccols = 4;

$load_colors = array(
   "100+" => "ff634f",
   "75-100" =>"ffa15e",
   "50-75" => "ffde5e",
   "25-50" => "caff98",
   "0-25" => "e2ecff",
   "down" => "515151"
);

$optional_graphs = array();
<% if node[:scalarium][:roles].has_key?("lb") && !node[:scalarium][:roles]['lb']['instances'].empty? -%>
  array_push($optional_graphs, 'haproxy_requests');
<% end -%>
<% if node[:scalarium][:roles].has_key?("db-master") && !node[:scalarium][:roles]['db-master']['instances'].empty? -%>
  array_push($optional_graphs, 'mysql_query');
<% end -%>
<% if (node[:scalarium][:roles].has_key?("rails-app") && !node[:scalarium][:roles]['rails-app']['instances'].empty? ) ||  (node[:scalarium][:roles].has_key?("php-app") && !node[:scalarium][:roles]['php-app']['instances'].empty? ) -%>
  array_push($optional_graphs, 'apache', 'apache_worker', 'apache_response_time');
<% end -%>
<% if node[:scalarium][:roles].has_key?("rails-app") && !node[:scalarium][:roles]['rails-app']['instances'].empty? -%>
  array_push($optional_graphs, 'passenger_memory_stats', 'passenger_status');
<% end -%>
<% if node[:scalarium][:roles].has_key?("web") && !node[:scalarium][:roles]['web']['instances'].empty? -%>
  array_push($optional_graphs, 'nginx_status');
<% end -%>
?>

